# ⚡ 快速测试指南（不用等 GPX）

## 方法 1：手动模拟（推荐）⭐⭐⭐⭐⭐

这个方法可以快速验证功能，不需要等待 GPX 自动播放。

### 步骤：

1. **运行 App 到模拟器**
   ```bash
   cmd + R
   ```

2. **设置初始位置**
   - 模拟器菜单：`Features → Location → Custom Location...`
   - 输入坐标：
     ```
     Latitude: 39.9042
     Longitude: 116.4074
     ```
   - 点击 OK

3. **在 App 中点击"开始圈地"**
   - 应该能看到第一个点被记录

4. **手动改变位置（模拟移动）**
   - 再次打开：`Features → Location → Custom Location...`
   - 输入新坐标（向北移动 15 米）：
     ```
     Latitude: 39.90434
     Longitude: 116.4074
     ```
   - 点击 OK
   - **等待 2 秒**（定时器触发）

5. **查看日志**
   - 切换到"更多" Tab → "开发测试" → "圈地功能测试"
   - 应该能看到第 2 个点被记录

6. **继续改变位置（画一个正方形）**
   - 依次输入以下坐标，每次等待 2 秒：

| 步骤 | 纬度 | 经度 | 方向 |
|------|------|------|------|
| 1 | 39.9042 | 116.4074 | 起点（西南角） |
| 2 | 39.90434 | 116.4074 | 向北 |
| 3 | 39.90448 | 116.4074 | 向北 |
| 4 | 39.90462 | 116.4074 | 向北（西北角） |
| 5 | 39.90462 | 116.40754 | 向东 |
| 6 | 39.90462 | 116.40768 | 向东（东北角） |
| 7 | 39.90448 | 116.40768 | 向南 |
| 8 | 39.90434 | 116.40768 | 向南 |
| 9 | 39.9042 | 116.40768 | 向南（东南角） |
| 10 | 39.9042 | 116.40754 | 向西 |
| 11 | 39.9042 | 116.4074 | 回到起点（闭环！） |

7. **验证结果**
   - 应该看到绿色横幅："圈地成功！领地面积: XXXm²"
   - 日志中有完整的验证过程

---

## 方法 2：使用脚本自动化（超快）⭐⭐⭐⭐⭐

我帮你写一个自动化脚本，一键完成测试！

### 使用方法：

1. **确保模拟器正在运行 App**

2. **在终端运行以下命令**：

```bash
# 场景 1：成功圈地
cd /Users/yanshuangren/Desktop/EarthLord
chmod +x test_success.sh
./test_success.sh
```

3. **观察模拟器**
   - 位置会自动改变
   - 日志会实时更新
   - 最后显示绿色横幅

---

## 方法 3：检查 GPX 文件是否在播放

### 如何判断 GPX 正在播放：

1. **看 Xcode 底部调试栏**
   - 位置图标（📍）应该高亮
   - 点击后显示当前使用的 GPX 文件名

2. **看 App 顶部状态栏**
   - 坐标应该在**持续变化**（每 2-3 秒更新一次）
   - 如果坐标不变 → GPX 没有播放

3. **看日志界面**
   - 点"开始圈地"后，应该每 2 秒记录一个点
   - 如果没有新点 → GPX 没有播放

### 如果 GPX 不播放：

#### 原因 1：GPX 文件格式问题
- Xcode 只播放有 `<time>` 标签的 GPX
- 我创建的文件都有时间标签，理论上没问题

#### 原因 2：Xcode 版本问题
- 某些 Xcode 版本有 GPX 播放 bug
- 尝试：重启 Xcode

#### 原因 3：模拟器位置服务未开启
- 模拟器设置：`Settings → Privacy & Security → Location Services`
- 确保开启

---

## 🎯 推荐测试流程（最快）

### 快速验证（5 分钟）

1. **用方法 1 手动输入 3-4 个点**
   - 验证：点能被记录
   - 验证：距离检查工作
   - 验证：日志正常输出

2. **用 Xcode 内置位置**
   ```
   Debug → Simulate Location → City Run
   ```
   - 点击"开始圈地"
   - 等待 2 分钟
   - 看看能否自动记录轨迹

3. **如果上面都不行**
   - 真机测试（你已经测试过了，功能正常）
   - 或者我写一个自动化测试脚本

---

## 🐛 如果还是不行，告诉我：

1. **App 顶部状态栏的坐标在变化吗？**
   - 是 → GPS 模拟正常，问题在其他地方
   - 否 → GPS 模拟没工作

2. **点"开始圈地"后，状态显示"追踪中"吗？**
   - 是 → 追踪已启动
   - 否 → 可能定位权限问题

3. **日志界面有"开始圈地追踪"吗？**
   - 是 → 日志系统正常
   - 否 → 看 Xcode 控制台有无报错

4. **截图发给我**
   - App 界面截图
   - 日志界面截图
   - Xcode 底部位置图标截图

我会根据你的反馈调整测试方案！
